<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hackathon Tracker 2025</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #333;
    margin: 0; padding: 20px;
  }
  .container {
    max-width: 1000px;
    margin: auto;
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
  }
  h1 {
    text-align: center;
    color: #764ba2;
    margin-bottom: 20px;
  }
  .stats {
    display: flex;
    justify-content: space-around;
    margin-bottom: 25px;
  }
  .stat {
    background: #f4f4f4;
    padding: 15px 25px;
    border-radius: 10px;
    font-weight: bold;
    color: #764ba2;
    width: 30%;
    text-align: center;
    font-size: 1.2rem;
  }
  .tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 15px;
  }
  .tab-btn {
    background: transparent;
    border: 2px solid #764ba2;
    color: #764ba2;
    cursor: pointer;
    padding: 8px 20px;
    margin: 0 5px;
    border-radius: 8px;
    font-weight: bold;
    transition: 0.3s;
  }
  .tab-btn.active,
  .tab-btn:hover {
    background: #764ba2;
    color: white;
  }
  .hackathon-list {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
    gap: 20px;
  }
  .hack-card {
    border: 1px solid #ddd;
    border-radius: 12px;
    padding: 15px 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  .hack-name {
    font-size: 1.1rem;
    font-weight: bold;
    color: #4a2c9a;
    margin-bottom: 8px;
  }
  .hack-desc {
    font-size: 0.9rem;
    margin-bottom: 8px;
    min-height: 50px;
  }
  .hack-info {
    font-size: 0.85rem;
    margin-bottom: 8px;
  }
  .status {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    color: white;
    margin-bottom: 8px;
  }
  .ongoing { background: #e74c3c; }
  .upcoming { background: #f39c12; }
  .completed { background: #27ae60; }
  .register-btn {
    display: inline-block;
    background: #764ba2;
    color: white;
    padding: 8px 12px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: bold;
    transition: background 0.3s;
  }
  .register-btn:hover {
    background: #5a3686;
  }
</style>
</head>
<body>
 <div class="container">
   <h1>ðŸš€ Hackathon Tracker 2025</h1>
   <div class="stats">
     <div class="stat" id="stat-ongoing">Live: 0</div>
     <div class="stat" id="stat-upcoming">Upcoming: 0</div>
     <div class="stat" id="stat-completed">Completed: 0</div>
   </div>
   <div class="tabs">
     <button class="tab-btn active" id="tab-ongoing">Live Now</button>
     <button class="tab-btn" id="tab-upcoming">Upcoming</button>
     <button class="tab-btn" id="tab-completed">Completed</button>
   </div>
   <div class="hackathon-list" id="hackathon-list">
     Loading hackathons...
   </div>
 </div>

<script>
  let hackathonData = null;
  let currentTab = 'ongoing';

  async function fetchData() {
    try {
      const res = await fetch('data/hackathons.json');
      if(!res.ok) throw new Error('Failed to load data');
      hackathonData = await res.json();
      updateStats();
      showTab(currentTab);
    } catch (err) {
      document.getElementById('hackathon-list').innerHTML = 
        '<p style="color:red; text-align:center;">Failed to load hackathon data.</p>';
      console.error(err);
    }
  }

  function updateStats() {
    document.getElementById('stat-ongoing').textContent = `Live: ${hackathonData.ongoing.length}`;
    document.getElementById('stat-upcoming').textContent = `Upcoming: ${hackathonData.upcoming.length}`;
    document.getElementById('stat-completed').textContent = `Completed: ${hackathonData.completed.length}`;
  }

  function showTab(tab) {
    currentTab = tab;
    
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById(`tab-${tab}`).classList.add('active');
    
    const list = hackathonData[tab];
    if(!list || list.length === 0) {
      document.getElementById('hackathon-list').innerHTML = `<p>No ${tab} hackathons currently.</p>`;
      return;
    }
    
    const html = list.map(h => `
      <div class="hack-card">
        <div class="hack-name">${h.name}</div>
        <div class="status ${h.status}">${capitalize(h.status)}</div>
        <div class="hack-desc">${h.description}</div>
        <div class="hack-info"><b>Dates:</b> ${formatDate(h.start_date)} - ${formatDate(h.end_date)}</div>
        <div class="hack-info"><b>Location:</b> ${h.location}</div>
        <div class="hack-info"><b>Prizes:</b> ${h.prizes}</div>
        <a href="${h.registration_link}" target="_blank" class="register-btn">${tab === 'completed' ? 'View Details' : 'Register'}</a>
      </div>
    `).join('');
    
    document.getElementById('hackathon-list').innerHTML = html;
  }

  function capitalize(str) {
    if(!str) return '';
    return str.charAt(0).toUpperCase() + str.slice(1);
  }

  function formatDate(str) {
    const d = new Date(str);
    return d.toLocaleDateString(undefined, { month: 'short', day: 'numeric' });
  }

  document.getElementById('tab-ongoing').addEventListener('click', () => showTab('ongoing'));
  document.getElementById('tab-upcoming').addEventListener('click', () => showTab('upcoming'));
  document.getElementById('tab-completed').addEventListener('click', () => showTab('completed'));

  fetchData();
</script>
</body>
</html>
